'use strict';function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var calc={data:[],currentInput:'',isFirstInput:!0,inputDigit:function inputDigit(a){this.isFirstInput?(this.currentInput+=a,this.isFirstInput=!1):/\d/.test(this.currentInput)||this.currentInput.includes('(-)')?this.currentInput+=a:(this.data.push(this.currentInput),this.currentInput=a)},inputOperator:function inputOperator(a){this.isFirstInput||(/^[\-+*/]$/.test(this.currentInput)?this.currentInput=a:(this.data.push(this.currentInput),this.currentInput=a))},CE:function CE(){this.currentInput=0<this.data.length?this.data.pop():''},AC:function AC(){this.data=[],this.currentInput='',this.isFirstInput=!0},negative:function negative(){/^[\-+*/]$/.test(this.currentInput)?(this.data.push(this.currentInput),this.currentInput='(-)'):this.currentInput.includes('(-)')?this.currentInput=this.currentInput.slice(3):/^\-\d/.test(this.currentInput)?this.currentInput=this.currentInput.slice(1):this.currentInput='(-)'+this.currentInput},decimal:function decimal(){this.currentInput.includes('.')||(/^[\-+*/]$/.test(this.currentInput)?(this.data.push(this.currentInput),this.currentInput='0.'):this.currentInput+=this.isFirstInput?'0.':'.')},equals:function equals(){if(0!==this.data.length)return this.data.push(this.currentInput),this.currentInput='',0==this.data.length%2||'(-)'===this.data[this.data.length-1]?void(this.data=['Error']):void(this.data=this.data.map(function(a){return a.replace('(-)','-')}),this.evaluateExpressions('*','/'),this.evaluateExpressions('+','-'),this.currentInput=this.data.pop()+'')},evaluateExpressions:function evaluateExpressions(a,b){for(var c=this.data.findIndex(function(k){return k===a||k===b})-1;0<=c;){var d=[].concat(_toConsumableArray(this.data.slice(c,c+3))),f=parseFloat(d[0]),g=d[1],h=parseFloat(d[2]),j=void 0;if('*'===g)j=f*h;else if('/'===g){if(0===h)return void(this.data=['Error']);j=f/h}else j='+'===g?f+h:f-h;this.data.splice(c,3,j),c=this.data.findIndex(function(k){return k===a||k===b})-1}}};function handleClick(a){var b=a.target.dataset.value;if('Error'===calc.data[0])return('CE'===b||'AC'===b)&&calc.AC(),void updateView();b&&(isDigit(b)?calc.inputDigit(b):'AC'===b?calc.AC():'CE'===b?calc.CE():'(-)'===b?calc.negative():'.'===b?calc.decimal():'='===b?calc.equals():calc.inputOperator(b),updateView())}function updateView(){var a=(0<calc.data.length?calc.data.join(' ')+' ':'')+calc.currentInput;/^\-?\d+\.\d{4,}$/.test(a)?(a=(+a).toFixed(4),a=a.replace(/(\.\d+?)0*$/,'$1'),calc.currentInput=a):a.includes('(-)')&&(a=a.replace(/\(\-\)/g,'-')),document.querySelector('.output-field p').innerText=a}function isDigit(a){return!isNaN(a)}document.querySelector('main').addEventListener('click',handleClick);
